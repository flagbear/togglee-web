(self.webpackChunk=self.webpackChunk||[]).push([[436],{66:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>y});var l=a(7294),n=a(5171),r=a.n(n),o=a(2949),s=a(5810);const c=()=>"xxxx-xxxx-xxx-xxxx".replace(/[x]/g,(e=>Math.floor(16*Math.random()).toString(16))),i=["release","context"],m=[{name:"equal",value:"eq"},{name:"not equal",value:"ne"},{name:"bigger",value:"gt"},{name:"bigger equal",value:"ge"},{name:"lower",value:"lt"},{name:"lower equal",value:"le"}],u=e=>{let{data:t,changeData:a}=e;const n=async(e,l,n)=>a("toggles",t.toggles.map(((t,a)=>e===a?{...t,[l]:n}:t))),r=async(e,t,a,l)=>n(e,"conditions",t.map(((e,t)=>a===t?l:e)));return l.createElement("table",{className:"table"},l.createElement("thead",null,l.createElement("tr",null,l.createElement("th",{style:{width:"20vw"}},"Name"),l.createElement("th",{style:{width:"10vw"}},"Type"),l.createElement("th",{style:{width:"50vw"}},"State"),l.createElement("th",{style:{width:"15vw"}},l.createElement("div",{className:"actions"},"Actions",l.createElement("button",{className:"button button--primary",onClick:()=>a("toggles",[...t.toggles,{name:void 0,type:i[0],conditions:[],value:!1,key:c()}])},l.createElement("i",{className:"fa fa-plus fa-lg"})))))),l.createElement("tbody",null,t.toggles.map(((e,o)=>l.createElement("tr",{key:"toggle_"+e.key},l.createElement("td",null,l.createElement("input",{type:"text",placeholder:"Name",value:e.name,onChange:e=>n(o,"name",e.target.value),required:!0})),l.createElement("td",null,l.createElement("select",{className:"button button--secondary",onChange:e=>n(o,"type",e.target.value),value:e.type,required:!0},i.map(((t,a)=>l.createElement("option",{key:"toggleType_"+e.key+"_"+a},t))))),l.createElement("td",null,e.type===i[0]?l.createElement(s.Z,{className:"switch",checked:e.value,onChange:e=>n(o,"value",e)}):e.conditions.map(((t,a)=>l.createElement(l.Fragment,null,l.createElement("div",{style:{display:"flex",flexDirection:"column",alignContent:"stretch"}},l.createElement("div",null,l.createElement("input",{style:{width:150},type:"text",placeholder:"Field",value:t.field,onChange:l=>r(o,e.conditions,a,{...t,field:l.target.value})}),l.createElement("select",{style:{width:155},className:"button button--secondary",onChange:l=>r(o,e.conditions,a,{...t,operation:l.target.value}),value:t.operation,required:!0},m.map(((t,a)=>l.createElement("option",{key:"OperationTypetoggleType_"+e.key+"_"+a,value:t.value},t.name)))),l.createElement("input",{style:{width:150},type:"text",placeholder:"Value",value:t.value,onChange:l=>r(o,e.conditions,a,{...t,value:l.target.value})}),l.createElement("button",{className:"button button--primary",onClick:()=>n(o,"conditions",e.conditions.filter(((e,t)=>a!==t)))},l.createElement("i",{className:"fa-regular fa-trash-can fa-lg"})))))))),l.createElement("td",null,l.createElement("div",{className:"actions"},e.type===i[1]&&l.createElement("button",{className:"button button--primary",onClick:()=>n(o,"conditions",[...e.conditions,{field:void 0,value:void 0,operation:m[0].value}])},l.createElement("i",{className:"fa fa-plus fa-lg"})),l.createElement("button",{className:"button button--primary",onClick:()=>a("toggles",t.toggles.filter(((e,t)=>o!==t)))},l.createElement("i",{className:"fa-regular fa-trash-can fa-lg"})))))))))};var g=a(4183);const d=e=>{let{changeData:t,data:a}=e;const[n,r]=(0,l.useState)(""),[o,s]=(0,l.useState)("");(0,l.useEffect)((()=>{r(localStorage.getItem("fileUrl")||""),s(localStorage.getItem("token")||"")}),[]);return l.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-start",margin:"1rem 0"}},l.createElement("input",{type:"text",style:{flexGrow:4},placeholder:"File Url",value:n,onChange:e=>{localStorage.setItem("fileUrl",e.target.value),r(e.target.value)},required:!0}),l.createElement("input",{style:{marginLeft:"10px",flexGrow:2},type:"password",placeholder:"Personal Access Token",value:o,onChange:e=>{localStorage.setItem("token",e.target.value),s(e.target.value)},required:!0}),l.createElement("button",{style:{marginLeft:"10px"},className:"button button--primary",onClick:async()=>{var e;const a=/https:\/\/gist.github.com\/.+\/(.+)#file-(.+)/;if(!a.test(n))return;const l=n.match(a),r=new g.vd({auth:o}),{data:{files:s}}=await r.rest.gists.get({gist_id:l[1]}),i=JSON.parse(null==(e=s[l[2]])?void 0:e.content).toggles.map((e=>({...e,key:c()})));t("toggles",i)}},l.createElement("i",{className:"fa fa-download"})),l.createElement("button",{style:{marginLeft:"10px"},className:"button button--primary",onClick:async()=>{const e=/https:\/\/gist.github.com\/.+\/(.+)#file-(.+)/;if(!e.test(n))return;const[t,l,r]=n.match(e),s=new g.vd({auth:o});await s.rest.gists.update({gist_id:l,files:{[r]:{content:JSON.stringify(a,void 0,4)}}})}},l.createElement("i",{className:"fa fa-upload"})))},p=()=>{const{colorMode:e}=(0,o.I)(),[t,a]=(0,l.useState)({toggles:[]}),[n,s]=(0,l.useState)();(0,l.useEffect)((()=>{const e=localStorage.getItem("appData");e&&c("toggles",JSON.parse(e).toggles)}),[]);const c=async(e,l)=>{const n={...t,[e]:l};localStorage.setItem("appData",JSON.stringify(n)),a(n),s({toggles:n.toggles.map((e=>{const t={name:e.name,type:e.type,conditions:e.type===i[1]?e.conditions.filter((e=>e.field&&e.value)):void 0,value:e.type===i[0]?e.value:void 0};return JSON.parse(JSON.stringify(t))})).filter((e=>e.name&&(e.type===i[0]||e.conditions.length>0)))})};return l.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"stretch",padding:"1rem 3rem"}},l.createElement(d,{data:n,changeData:c}),l.createElement(u,{data:t,changeData:c}),l.createElement(r(),{src:n,name:!1,theme:"dark"===e?"ashes":"rjv-default"}))};function y(){return l.createElement(p,null)}},5696:()=>{}}]);