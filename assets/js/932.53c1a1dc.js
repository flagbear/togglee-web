"use strict";(self.webpackChunkflagbear_website=self.webpackChunkflagbear_website||[]).push([[932],{6551:(e,t,a)=>{a.r(t),a.d(t,{default:()=>m});var s=a(6540),l=a(8785),n=a.n(l),i=a(5293),o=a(303);const r=()=>"xxxx-xxxx-xxx-xxxx".replace(/[x]/g,(e=>Math.floor(16*Math.random()).toString(16)));var c=a(4848);const d=["release","context"],g=[{name:"equal",value:"eq"},{name:"not equal",value:"ne"},{name:"bigger",value:"gt"},{name:"bigger equal",value:"ge"},{name:"lower",value:"lt"},{name:"lower equal",value:"le"}],u=e=>{let{data:t,changeData:a}=e;const s=async(e,s,l)=>a("toggles",t.toggles.map(((t,a)=>e===a?{...t,[s]:l}:t))),l=async(e,t,a,l)=>s(e,"conditions",t.map(((e,t)=>a===t?l:e)));return(0,c.jsxs)("table",{className:"table",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{style:{width:"20vw"},children:"Name"}),(0,c.jsx)("th",{style:{width:"10vw"},children:"Type"}),(0,c.jsx)("th",{style:{width:"50vw"},children:"State"}),(0,c.jsx)("th",{style:{width:"15vw"},children:(0,c.jsxs)("div",{className:"actions",children:["Actions",(0,c.jsx)("button",{className:"button button--primary",onClick:()=>a("toggles",[...t.toggles,{name:void 0,type:d[0],conditions:[],value:!1,key:r()}]),children:(0,c.jsx)("i",{className:"fa fa-plus fa-lg"})})]})})]})}),(0,c.jsx)("tbody",{children:t.toggles.map(((e,n)=>(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:(0,c.jsx)("input",{type:"text",placeholder:"Name",value:e.name,onChange:e=>s(n,"name",e.target.value),required:!0})}),(0,c.jsx)("td",{children:(0,c.jsx)("select",{className:"button button--secondary",onChange:e=>s(n,"type",e.target.value),value:e.type,required:!0,children:d.map(((t,a)=>(0,c.jsx)("option",{children:t},`toggleType_${e.key}_${a}`)))})}),(0,c.jsx)("td",{children:e.type===d[0]?(0,c.jsx)(o.A,{className:"switch",checked:e.value,onChange:e=>s(n,"value",e)}):e.conditions.map(((t,a)=>(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("div",{style:{display:"flex",flexDirection:"column",alignContent:"stretch"},children:(0,c.jsxs)("div",{children:[(0,c.jsx)("input",{style:{width:150},type:"text",placeholder:"Field",value:t.field,onChange:s=>l(n,e.conditions,a,{...t,field:s.target.value})}),(0,c.jsx)("select",{style:{width:155},className:"button button--secondary",onChange:s=>l(n,e.conditions,a,{...t,operation:s.target.value}),value:t.operation,required:!0,children:g.map(((t,a)=>(0,c.jsx)("option",{value:t.value,children:t.name},`OperationTypetoggleType_${e.key}_${a}`)))}),(0,c.jsx)("input",{style:{width:150},type:"text",placeholder:"Value",value:t.value,onChange:s=>l(n,e.conditions,a,{...t,value:s.target.value})}),(0,c.jsx)("button",{className:"button button--primary",onClick:()=>s(n,"conditions",e.conditions.filter(((e,t)=>a!==t))),children:(0,c.jsx)("i",{className:"fa-regular fa-trash-can fa-lg"})})]})})})))}),(0,c.jsx)("td",{children:(0,c.jsxs)("div",{className:"actions",children:[e.type===d[1]&&(0,c.jsx)("button",{className:"button button--primary",onClick:()=>s(n,"conditions",[...e.conditions,{field:void 0,value:void 0,operation:g[0].value}]),children:(0,c.jsx)("i",{className:"fa fa-plus fa-lg"})}),(0,c.jsx)("button",{className:"button button--primary",onClick:()=>a("toggles",t.toggles.filter(((e,t)=>n!==t))),children:(0,c.jsx)("i",{className:"fa-regular fa-trash-can fa-lg"})})]})})]},`toggle_${e.key}`)))})]})};var h=a(8376);const x=e=>{let{changeData:t,data:a}=e;const[l,n]=(0,s.useState)(""),[i,o]=(0,s.useState)("");(0,s.useEffect)((()=>{n(localStorage.getItem("fileUrl")||""),o(localStorage.getItem("token")||"")}),[]);return(0,c.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-start",margin:"1rem 0",flexWrap:"wrap",width:"100%"},children:[(0,c.jsx)("input",{type:"text",style:{margin:"5px",flexGrow:4},placeholder:"File Url",value:l,onChange:e=>{localStorage.setItem("fileUrl",e.target.value),n(e.target.value)},required:!0}),(0,c.jsx)("input",{style:{margin:"5px",flexGrow:2},type:"password",placeholder:"Personal Access Token",value:i,onChange:e=>{localStorage.setItem("token",e.target.value),o(e.target.value)},required:!0}),(0,c.jsxs)("div",{style:{margin:"5px"},children:[(0,c.jsx)("button",{className:"button button--primary",onClick:async()=>{const e=/https:\/\/gist.github.com\/.+\/(.+)#file-(.+)/;if(!e.test(l))return;const a=l.match(e),s=new h.Eg({auth:i}),{data:{files:n}}=await s.rest.gists.get({gist_id:a[1]}),o=JSON.parse(n[a[2]]?.content).toggles.map((e=>({...e,key:r()})));t("toggles",o)},children:(0,c.jsx)("i",{className:"fa fa-download"})}),(0,c.jsx)("button",{style:{marginLeft:"10px"},className:"button button--primary",onClick:async()=>{const e=/https:\/\/gist.github.com\/.+\/(.+)#file-(.+)/;if(!e.test(l))return;const[t,s,n]=l.match(e),o=new h.Eg({auth:i});await o.rest.gists.update({gist_id:s,files:{[n]:{content:JSON.stringify(a,void 0,4)}}})},children:(0,c.jsx)("i",{className:"fa fa-upload"})})]})]})},p=()=>{const{colorMode:e}=(0,i.G)(),[t,a]=(0,s.useState)({toggles:[]}),[l,o]=(0,s.useState)();(0,s.useEffect)((()=>{const e=localStorage.getItem("appData");e&&r("toggles",JSON.parse(e).toggles)}),[]);const r=async(e,s)=>{const l={...t,[e]:s};localStorage.setItem("appData",JSON.stringify(l)),a(l),o({toggles:l.toggles.map((e=>{const t={name:e.name,type:e.type,conditions:e.type===d[1]?e.conditions.filter((e=>e.field&&e.value)):void 0,value:e.type===d[0]?e.value:void 0};return JSON.parse(JSON.stringify(t))})).filter((e=>e.name&&(e.type===d[0]||e.conditions.length>0)))})};return(0,c.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"stretch",padding:"1rem 3rem"},children:[(0,c.jsx)(x,{data:l,changeData:r}),(0,c.jsx)(u,{data:t,changeData:r}),(0,c.jsx)(n(),{src:l,name:!1,theme:"dark"===e?"ashes":"rjv-default"})]})};function m(){return(0,c.jsx)(p,{})}}}]);