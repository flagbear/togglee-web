(self.webpackChunk=self.webpackChunk||[]).push([[433],{9740:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var l=a(7294),n=a(5171),o=a.n(n),r=a(2949),s=a(5810);const c=["release","context"],i=[{name:"equal",value:"eq"},{name:"not equal",value:"ne"},{name:"bigger",value:"gt"},{name:"bigger equal",value:"ge"},{name:"lower",value:"lt"},{name:"lower equal",value:"le"}],m=e=>{let{data:t,changeData:a}=e;const n=async(e,l,n)=>a("toggles",t.toggles.map(((t,a)=>e===a?{...t,[l]:n}:t))),o=async(e,t,a,l)=>n(e,"conditions",t.map(((e,t)=>a===t?l:e)));return l.createElement("table",{className:"table"},l.createElement("thead",null,l.createElement("tr",null,l.createElement("th",{style:{width:"20vw"}},"Name"),l.createElement("th",{style:{width:"10vw"}},"Type"),l.createElement("th",{style:{width:"50vw"}},"State"),l.createElement("th",{style:{width:"15vw"}},l.createElement("div",{className:"actions"},"Actions",l.createElement("button",{className:"button button--primary",onClick:()=>a("toggles",[...t.toggles,{name:void 0,type:c[0],conditions:[],value:!1,key:"xxxx-xxxx-xxx-xxxx".replace(/[x]/g,(e=>Math.floor(16*Math.random()).toString(16)))}])},l.createElement("i",{className:"fa fa-plus fa-lg"})))))),l.createElement("tbody",null,t.toggles.map(((e,r)=>l.createElement("tr",{key:"toggle_"+e.key},l.createElement("td",null,l.createElement("input",{type:"text",placeholder:"Name",value:e.name,onChange:e=>n(r,"name",e.target.value),required:!0})),l.createElement("td",null,l.createElement("select",{className:"button button--secondary",onChange:e=>n(r,"type",e.target.value),value:e.type,required:!0},c.map(((t,a)=>l.createElement("option",{key:"toggleType_"+e.key},t))))),l.createElement("td",null,e.type===c[0]?l.createElement(s.Z,{checked:e.value,onChange:e=>n(r,"value",e)}):e.conditions.map(((t,a)=>l.createElement(l.Fragment,null,l.createElement("div",{style:{display:"flex",flexDirection:"column",alignContent:"stretch"}},l.createElement("div",null,l.createElement("input",{style:{width:100},type:"text",placeholder:"Field",value:t.field,onChange:l=>o(r,e.conditions,a,{...t,field:l.target.value})}),l.createElement("select",{style:{width:170},className:"button button--secondary",onChange:l=>o(r,e.conditions,a,{...t,operation:l.target.value}),value:t.operation,required:!0},i.map(((t,a)=>l.createElement("option",{key:"OperationTypetoggleType_"+e.key,value:t.value},t.name)))),l.createElement("input",{style:{width:100},type:"text",placeholder:"Value",value:t.value,onChange:l=>o(r,e.conditions,a,{...t,value:l.target.value})}),l.createElement("button",{className:"button button--primary",onClick:()=>n(r,"conditions",e.conditions.filter(((e,t)=>a!==t)))},l.createElement("i",{className:"fa-regular fa-trash-can fa-lg"})))))))),l.createElement("td",null,l.createElement("div",{className:"actions"},e.type===c[1]&&l.createElement("button",{className:"button button--primary",onClick:()=>n(r,"conditions",[...e.conditions,{field:void 0,value:void 0,operation:i[0].value}])},l.createElement("i",{className:"fa fa-plus fa-lg"})),l.createElement("button",{className:"button button--primary",onClick:()=>a("toggles",t.toggles.filter(((e,t)=>r!==t)))},l.createElement("i",{className:"fa-regular fa-trash-can fa-lg"})))))))))};var u=a(4183);const g=e=>{let{changeData:t,data:a}=e;const[n,o]=(0,l.useState)(""),[r,s]=(0,l.useState)("");(0,l.useEffect)((()=>{o(localStorage.getItem("fileUrl")||""),s(localStorage.getItem("token")||"")}),[]);return l.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-start",margin:"1rem 0"}},l.createElement("input",{type:"text",style:{flexGrow:4},placeholder:"File Url",value:n,onChange:e=>{localStorage.setItem("fileUrl",e.target.value),o(e.target.value)},required:!0}),l.createElement("input",{style:{marginLeft:"10px",flexGrow:2},type:"password",placeholder:"Personal Access Token",value:r,onChange:e=>{localStorage.setItem("token",e.target.value),s(e.target.value)},required:!0}),l.createElement("button",{style:{marginLeft:"10px"},className:"button button--primary",onClick:async()=>{var e;const a=/https:\/\/gist.github.com\/.+\/(.+)#file-(.+)/;if(!a.test(n))return;const l=n.match(a),o=new u.vd({auth:r}),{data:{files:s}}=await o.rest.gists.get({gist_id:l[1]});t("toggles",JSON.parse(null==(e=s[l[2]])?void 0:e.content).toggles)}},l.createElement("i",{className:"fa fa-download"})),l.createElement("button",{style:{marginLeft:"10px"},className:"button button--primary",onClick:async()=>{const e=/https:\/\/gist.github.com\/.+\/(.+)#file-(.+)/;if(!e.test(n))return;const[t,l,o]=n.match(e),s=new u.vd({auth:r});console.log({gist_id:l,files:{[o]:{content:JSON.stringify(a)}}}),await s.rest.gists.update({gist_id:l,files:{[o]:{content:JSON.stringify(a,void 0,4)}}})}},l.createElement("i",{className:"fa fa-upload"})))},d=()=>{const{colorMode:e}=(0,r.I)(),[t,a]=(0,l.useState)({toggles:[]}),[n,s]=(0,l.useState)();(0,l.useEffect)((()=>{const e=localStorage.getItem("appData");console.log(e),e&&i("toggles",JSON.parse(e).toggles)}),[]);const i=async(e,l)=>{const n={...t,[e]:l};localStorage.setItem("appData",JSON.stringify(n)),a(n),s({toggles:n.toggles.map((e=>{const t={name:e.name,type:e.type,conditions:e.type===c[1]?e.conditions.filter((e=>e.field&&e.value)):void 0,value:e.type===c[0]?e.value:void 0};return JSON.parse(JSON.stringify(t))})).filter((e=>e.name&&(e.type===c[0]||e.conditions.length>0)))})};return l.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"stretch",padding:"1rem 3rem"}},l.createElement(g,{data:n,changeData:i}),l.createElement(m,{data:t,changeData:i}),l.createElement(o(),{src:n,name:!1,theme:"dark"===e?"ashes":"rjv-default"}))};function p(){return l.createElement(d,null)}},5696:()=>{}}]);